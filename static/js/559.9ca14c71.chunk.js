"use strict";(self.webpackChunkdelivery=self.webpackChunkdelivery||[]).push([[559],{559:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var n=t(165),a=t(413),s=t(861),u=t(439),i="OrderPage_pageContainer__2dUP3",c="OrderPage_container__pRw1c",o="OrderPage_submitBlock__hO4BI",l="OrderPage_submitButton__tXEEr",d=t(942),f=t(791),p="CartList_container__gPSC7",m="CartList_title__u3ZQq",h="CartList_card__lbGqU",v="CartList_img__hKfGl",_="CartList_imgThumb__oJduq",x="CartList_cardText__6QoPU",Z="CartList_label__tFT54",b="CartList_quantityInput__aGl-i",j="CartList_button__i1n7r",y=t(184),N=function(e){var r=e.cart,t=e.onDeleteItem,n=e.handleTotal,s=(0,f.useState)({}),i=(0,u.Z)(s,2),c=i[0],o=i[1];(0,f.useEffect)((function(){var e=0;r.forEach((function(r){var t=r.id,n=r.price,a=c[t]||1;e+=Number(n)*a})),n(e)}),[c,r,n]);var l=r.map((function(e){var r=e.name,n=e.id,s=e.price,u=e.imgUrl,i=c[n]||1;return(0,y.jsx)("li",{children:(0,y.jsxs)("div",{className:h,children:[(0,y.jsx)("div",{className:_,children:(0,y.jsx)("img",{className:v,src:u,alt:""})}),(0,y.jsxs)("div",{className:x,children:[(0,y.jsx)("h2",{children:r}),(0,y.jsxs)("p",{children:["Price:",Number(s)*i]})]}),(0,y.jsxs)("div",{className:b,children:[(0,y.jsx)("label",{className:Z,htmlFor:"quantity",children:"Quantity"}),(0,y.jsx)("input",{id:"quantity",min:1,type:"number",onChange:function(e){!function(e,r){var t=(0,a.Z)((0,a.Z)({},c),{},(0,d.Z)({},r,e.currentTarget.value));o(t)}(e,n)}})]}),(0,y.jsx)("button",{className:j,onClick:function(){return t(n)},children:"Delete"})]})},n)}));return(0,y.jsxs)("div",{className:p,children:[(0,y.jsx)("h1",{className:m,children:"Cart:"}),(0,y.jsx)("ul",{children:l})]})},w=t(705),g="OrderForm_container__50tx+",k="OrderForm_form__LMIRx",C="OrderForm_inputWrapper__qr3cg",P="OrderForm_label__UhGli",q="OrderForm_input__gy5PR",F=[{id:"1",name:"name",label:"Name"},{id:"2",name:"email",label:"Email"},{id:"3",name:"phone",label:"Phone"},{id:"4",name:"address",label:"Address"}],L=t(727),O=function(e){var r=e.onSubmitForm,t=L.Ry().shape({name:L.Z_().required('The "name" field is required').matches(/^[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\s]+$/,"Please enter a name in the correct format"),phone:L.Rx().typeError("Please enter a numerical value").required('The "phone" field is required'),email:L.Z_().required("Email is required").matches(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Correct format: mail@ukr.net").test("is-valid",(function(e){return"".concat(e.path," is invalid")}),(function(e,r){return!e||"ru"!==e.substr(-2,2)||r.createError({message:"russia is a terorist state"})})),address:L.Z_().required('The "address" field is required')}),n=F.map((function(e){var r=e.id,t=e.name,n=e.label;return(0,y.jsxs)("div",{className:C,children:[(0,y.jsx)("label",{htmlFor:t,className:P,children:n}),(0,y.jsx)(w.gN,{className:q,id:t,type:t,name:t,placeholder:n}),(0,y.jsx)(w.Bc,{name:t,component:"p"})]},r)}));return(0,y.jsx)("div",{className:g,children:(0,y.jsx)(w.J9,{initialValues:{name:"",email:"",phone:"",address:""},onSubmit:r,validationSchema:t,children:function(){return(0,y.jsx)(w.l0,{id:"orderForm",className:k,children:n})}})})},S=t(993),T=t(686),E=t.n(T),R=function(){var e=(0,f.useState)([]),r=(0,u.Z)(e,2),t=r[0],d=r[1],p=(0,f.useState)(null),m=(0,u.Z)(p,2),h=(m[0],m[1]),v=(0,f.useState)(""),_=(0,u.Z)(v,2),x=_[0],Z=_[1],b=(0,f.useState)({name:"",email:"",phone:"",address:""}),j=(0,u.Z)(b,2),w=(j[0],j[1]);var g=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r,t,s){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<=0)){e.next=3;break}return E().Notify.failure("Your cart is empty"),e.abrupt("return");case 3:return u=(0,a.Z)((0,a.Z)({},r),{},{dishes:t,totalPrice:s}),e.prev=4,e.next=7,(0,S.wP)(u);case 7:E().Notify.success("Order added succesfully"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),E().Notify.failure(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(r,t,n){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,S.dv)();case 3:r=e.sent,d(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var k=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,S.oN)(r);case 3:a=t.filter((function(e){return e.id!==r})),d(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{className:i,children:[(0,y.jsxs)("div",{className:c,children:[(0,y.jsx)(O,{onSubmitForm:function(e){w((function(){return(0,a.Z)({},e)})),g(e,t,x)}}),(0,y.jsx)(N,{cart:t,onDeleteItem:k,handleTotal:function(e){Z(e)}})]}),(0,y.jsxs)("div",{className:o,children:[(0,y.jsxs)("div",{children:["Total price ",x]}),(0,y.jsx)("button",{type:"submit",form:"orderForm",className:l,children:"Submit"})]})]})}},993:function(e,r,t){t.d(r,{Dg:function(){return i},GY:function(){return u},P0:function(){return c},dA:function(){return l},dv:function(){return o},oN:function(){return d},wP:function(){return f}});var n=t(165),a=t(861),s=t(243).Z.create({baseURL:"https://delivery-backend-85vw.onrender.com/api"}),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/restaurants");case 2:return r=e.sent,t=r.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/products");case 2:return r=e.sent,t=r.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/products/".concat(r));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/cart");case 2:return r=e.sent,t=r.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.put("/cart/".concat(r));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.delete("/cart/".concat(r));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/order/",r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=559.9ca14c71.chunk.js.map